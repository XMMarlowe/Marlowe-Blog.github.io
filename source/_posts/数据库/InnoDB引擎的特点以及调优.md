---
title: InnoDB引擎的特点以及调优
author: Marlowe
tags: InnoDB
categories: 数据库
abbrlink: 476
date: 2021-01-12 21:51:03
---

谈谈InnoDB的特点，以及InnoDB解决的问题...
<!--more-->

### 简介

InnoDB引擎是MySQL数据库的另一个重要的存储引擎,正成为目前MySQL AB所发行的新版的标准,被包含在所有二进制安装包里,和其他存储引擎相比,InnoDB引擎的优点是支持兼容ACID的事务(类似于PostgreSQL),以及参数完整性(有外键)等.现在Innobase实行双认证授权.MySQL5.5.5以后默认的存储引擎都是InnoDB引擎

### 特点

1. **支持事务**(事务是指逻辑上的一组操作,组成这组操作的各个单元,要么全成功,要么全失败)
2. **行级锁定**(更新时一般是锁定当前行):通过索引实现,全表扫描仍然会是锁定整个表,注意间隙锁的影响.
3. 读写阻塞与事务隔离级别相关.
4. **具有非常高效的缓存特性,能缓存索引,也能缓存数据.**
5. 整个表和主键以Cluster方式存储,组成一颗平衡树.
6. 所有Secondary Index 都会保存主键信息.
7. **支持分区,表空间**.类似于Oracle数据库.
8. **支持外键约束**,不支持全文索引,5.5之前支持,后面不再支持.
9. **和MyISAM相比,InnoDB对于硬件资源要求比较高.**

### 适用的生产场景

1. **需要支持事务的业务**(例如转账,付款)
2. **行级锁定对于高并发有很好的适应能力但是需要保证查询是通过索引完成**.
3. **数据读写及更新都比较频繁的场景**,如:BBS,SNS,微博,微信等.
4. **数据一致性要求很高的业务**.如:转账,充值等.
5. 硬件设备内存较大,可以很好利用InnoDB较好的缓存能力来提高内存利用率,尽可能**减少磁盘IO的开销.**

### InnoDB引擎调优精要
1. **主键尽可能小,避免给Secondary index带来过大的空间负担**.
2. **避免全表扫描,因为会使用表锁**.
3. 尽可能缓存所有的索引和数据,提高响应速度,减少磁盘IO消耗.
4. 在大批量小插入的时候,**尽量自己控制事务而不要使用autocommit自动提交**,有开关参数可以控制提交.
5. **合理设置Innodb_flush_log_at_trx_commit 参数值,不要过度追求安全性**.如果Innodb_flush_log_at_trx_commit的值为0,log buffer每秒就会被刷写日志文件进入磁盘,提交事务的时候不做任何操作.
6. **避免主键更新,因为这会带来大量的数据移动**.


### 参考
[InnoDB引擎的特点及优化方法](https://www.cnblogs.com/liulei-LL/p/7694085.html)

