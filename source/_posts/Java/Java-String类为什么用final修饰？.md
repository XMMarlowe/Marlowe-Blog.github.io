---
title: Java String类为什么用final修饰？
author: Marlowe
tags:
  - String
  - final
categories: Java
abbrlink: 13698
date: 2021-09-10 08:13:33
---

很多人都知道String类是final修饰的，但是可能不太清楚为啥用final修饰，以及用final修饰的好处。

<!--more-->

### final关键字

final是Java中的保留关键字，可以用来修饰类，方法和变量。其中，被final修饰的类不能被继承即不能拥有自己的子类，被final修饰方法不能被重写，final修饰的属性、变量初始化之后不能被修改。

### String类中为何使用final关键字及其好处

#### String类的源码

![20210910134752](https://aishu-marlowe.oss-cn-beijing.aliyuncs.com/20210910134752.png)

从上述源码我们可以发现以下两点：

* String类用final修饰，代表String类不可被继承。
* 用于存储字符串值的char[]数组用private和final修饰，其中，final可以保证value的引用地址不会被修改，但是不能保证数组中的值不会被修改，而配合private修饰符，能够保证值不会被外部修改。这样就能保证String类的不可变性。

那么，String类的不可变性能够带来哪些好处呢？

#### 不可变性的好处

String类的不可变性带来的好处总结主要有两点：

* 因为String类的不可变性，才能**使得JVM可以实现字符串常量池**；字符串常量池可以在程序运行时节约很多内存空间，因为不同的字符串变量指向相同的字面量时，都是指向字符串常量池中的同一个对象。**这样一方面能够节约内存，另一方面也提升了性能**。
* 因为String类的不可变性，从而保证了字符串对象在**多线程环境下是线程安全的**。如果String类是可变的，那么会引起很严重的安全问题。我们在很多情况下都是直接通过字符串传递数据，比如数据库的用户名密码、网络编程中的ip和端口，**因为字符串是不可变的，所以它的值不能被修改，如果字符串是可变的，那么可以通过改变引用地址指向的值去修改字符串的值，从而导致安全漏洞。**

### 总结

String类用final修饰一方面保证在多线程环境下的线程安全，另一方面实现字符串常量池节约内存和提升性能。

### 参考

[Java中的String类为什么用final修饰？](https://bbs.huaweicloud.com/blogs/201591)