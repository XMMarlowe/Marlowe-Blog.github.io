---
title: 操作系统之内存管理
author: Marlowe
abbrlink: 12353
date: 2021-03-22 19:58:34
tags: 
  - 操作系统
  - 内存管理
categories: 操作系统
---

<!--more-->
### 虚拟地址转换为物理地址
* **第一步，先将虚拟地址转换为逻辑地址：** 根据程序中的虚拟地址得出其所在的段，然后加上段偏移，我们就能得到一个逻辑地址
* **第二步，再将逻辑地址转换为线型地址：** 有了逻辑地址之后，我们需要将逻辑地址转换为线型地址（因为线型地址是逻辑地址转换到物理地址的一个中间层），只需要把逻辑地址加上段的基地址就能生成一个线型地址
* **第三步，再将线型地址再转换为物理地址：**
  * 如果启用了分页机制，那么就需要将需要找到段中对应页的地址，然后再找到页内偏移地址，最后得到物理地址
   * 如果没有启用分页机制，那么线型地址直接就是物理地址了


### 常见的几种内存管理机制
简单分为**连续分配管理方式**和**非连续分配管理方式**这两种。连续分配管理方式是指为一个用户程序分配一个连续的内存空间，常见的如**块式管理**。同样地，非连续分配管理方式允许一个程序使用的内存分布在离散或者说不相邻的内存中，常见的如**页式管理、段式管理、段页式管理。**

1. **块式管理:** 远古时代的计算机操系统的内存管理方式。将内存分为几个固定大小的块，每个块中只包含一个进程。 如果程序运行需要内存的话，操作系统就分配给它一块，如果程序运行只需要很小的空间的话，分配的这块内存很大一部分几乎被浪费了。这些在每个块中未被利用的空间，我们称之为碎片。
2. **页式管理:** 把主存分为大小相等且固定的一页一页的形式，页较小，相对相比于块式管理的划分力度更大，提高了内存利用率,减少了碎片。页式管理通过页表对应逻辑地址和物理地址。
1. **段式管理:** 页式管理虽然提高了内存利用率，但是页式管理其中的页实际并无任何实际意义。段式管理把主存分为一段段的，每一段的空间又要比一页的空间小很多。但是，最重要的是段是有实际意义的，每个段定义了一组逻辑信息，例如，有主程序段MAIN、子程序段X、数据段D及栈段S等。段式管理通过段表对应逻辑地址和物理地址。
4. **段页式管理:** 结合了段式管理和页式管理的优点。简单来说段页式管理机制就是把主存先分成若干段，每个段又分成若干页，也就是说段页式管理机制中段与段之间以及段的内部的都是离散的。



### 参考
[操作系统之内存管理](https://blog.unclezs.com/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html)

[常见的几种内存管理机制](https://snailclimb.gitee.io/javaguide/#/docs/operating-system/basis?id=_32-%e5%b8%b8%e8%a7%81%e7%9a%84%e5%87%a0%e7%a7%8d%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86%e6%9c%ba%e5%88%b6)